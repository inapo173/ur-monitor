name: UR Monitor

on:
  schedule:
    # -----------------------------------------------------------
    # 1. メイン監視タイム (日本時間 08:00 〜 22:50)
    #    UTC 23:00 〜 13:50 まで 10分おき
    # -----------------------------------------------------------
    - cron: '*/10 23,0-13 * * *'

    # -----------------------------------------------------------
    # 2. 定時連絡 / 最終チェック (日本時間 23:30)
    #    UTC 14:30 に1回だけ実行
    # -----------------------------------------------------------
    - cron: '30 14 * * *'

  # 手動実行ボタン
  workflow_dispatch:

jobs:
  run-script:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'
      - name: Install dependencies
        run: pip install requests beautifulsoup4
      - name: Run script
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
          HEALTHCHECK_URL: ${{ secrets.HEALTHCHECK_URL }}
        run: python main.py
